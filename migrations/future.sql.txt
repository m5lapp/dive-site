create table if not exists operator_types (
    id          bigint primary key generated always as identity,
    name        text not null,
    description text not null,
);


create table if not exists operators (
    id            bigint primary key generated always as identity,
    version       integer not null default 1,
    created_at    timestamp(8) with time zone not null default now(),
    updated_at    timestamp(8) with time zone not null default now(),
    user_id       text not null check (length(user_id) = 20),
    owner_id integer not null
    operator_type_id    bigint references operator_types(id) on delete restrict,
    name                text not null,
    street varchar(256) not null,
    suburb varchar(256) not null,
    state varchar(256) not null,
    postcode varchar(16) not null,
    website_url varchar(2048) not null,
    email_address varchar(254) not null,
    phone_number varchar(30) not null,
    comments varchar(1024) not null,
    country_id integer not null,
);


CREATE TABLE public.divelog_operatortype (
    code varchar(3) not null,
    name varchar(32) not null,
    description varchar(256) not null
);

CREATE TABLE dive_operator (
    id integer not null,
    name varchar(256) not null,
    street varchar(256) not null,
    suburb varchar(256) not null,
    state varchar(256) not null,
    postcode varchar(16) not null,
    website_url varchar(2048) not null,
    email_address varchar(254) not null,
    phone_number varchar(30) not null,
    comments varchar(1024) not null,
    country_id integer not null,
    operator_type_id varchar(3) not null,
    owner_id integer not null
);

